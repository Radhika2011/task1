
<html>
<head>
<title>editor</title>
<style>
.editor{width:500px;height:300px;resize:none}
#preview{width:500px}
</style>
<script language="javascript">
function preview()
{var colour=document.getElementById('color');
var textArea=document.getElementById('my_text');
var div=document.getElementById('preview');
var text=textArea.value;
text=text.replace(/\</gi,"<");
text=text.replace(/\>/gi,">");
text=text.replace(/\n/gi,'<br>');
text=text.replace(/\[b\]/gi,"<b>");
text=text.replace(/\[\/b\]/gi,"</b>");
text=text.replace(/\[i\]/gi,"<i>");
text=text.replace(/\[\/i\]/gi,"</i>");
text=text.replace(/\[u\]/gi,"<u>");
text=text.replace(/\[\/u\]/gi,"</u>");
text=text.replace(/\[p\]/gi,"<p>");
text=text.replace(/\[\/p\]/gi,"</p>");
text = text.replace(/\[color:colour.value\]/gi,"<font color=colour.value>");
text = text.replace(/\[\/color\]/gi,"</font>");
div.innerHTML=text;}
function Onselection(val1,val2)
{var textArea=document.getElementById('my_text');
if(typeof(textArea.selectionStart)!="undefined")
{var begin=textArea.value.substr(0,textArea.selectionStart);
var selection=textArea.value.substr(textArea.selectionStart,textArea.selectionEnd-textArea.selectionStart);
var end=textArea.value.substr(textArea.selectionEnd);
textArea.value=begin+val1+selection+val2+end;}}

function Dselection(val1,val2)
{var textArea=document.getElementById('my_text');
if(typeof(textArea.selectionStart)!="undefined")
{var len=textArea.length;
var begin=textArea.value.substr(0,textArea.selectionStart);
var selected=textArea.value.substr(textArea.selectionStart,textArea.selectionEnd-textArea.selectionStart);
var end=textArea.value.substr(textArea.selectionEnd);
var final="";
for (var i=0;i<len;i+=2)
final+=selected.charAt(i).toUpperCase() + selected.charAt(i+1).toLowerCase();
textArea.value=begin+val1+final+val2+end;}}
function COLOUR()
{var colour=document.getElementById('color');
Onselection('[color:'+colour.value+']','[/color]');}
</script>
	
</head>	
<body>
<input type="button" value="Bold" onclick="Onselection('[b]','[/b]')"/>
<input type="button" value="Italics" onclick="Onselection('[i]','[/i]')"/>
<input type="button" value="Underline" onclick="Onselection('[u]','[/u]')"/>
<input type="button" value="Paragraph" onclick="Onselection('[p]','[/p]')"/>
<input type="button" value="Dold" onclick="Dselection('[b]','[/b]')"/>
<input type="button" value="Ditalics" onclick="Dselection('[i]','[/i]')"/>
Choose colour: <input type="color" id='color'>
<input type="button" value="Setcolor" onclick="COLOUR()"/>
<br/>
<textarea class="editor" id="my_text" rows=20 cols=10></textarea>
<br/>
<input type="button" value="Show text" onclick="preview()"/>
<div id="preview">
</div>
</body>
</html>
